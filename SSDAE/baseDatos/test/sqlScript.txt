-- This script was generated by a beta version of the ERD tool in pgAdmin 4.
-- Please log an issue at https://redmine.postgresql.org/projects/pgadmin4/issues/new if you find any bugs, including reproduction steps.
BEGIN;


CREATE TABLE IF NOT EXISTS public."Alumnos"
(
    id_alumno bigserial NOT NULL,
    estatus character varying NOT NULL,
    fecha_ing date NOT NULL,
    CONSTRAINT id_alumno PRIMARY KEY (id_alumno)
);

CREATE TABLE IF NOT EXISTS public."Profesores"
(
    id_profesor bigserial NOT NULL,
    interno_externo bigint NOT NULL,
    CONSTRAINT id_profesor PRIMARY KEY (id_profesor)
);

CREATE TABLE IF NOT EXISTS public."Recuperaciones"
(
    id_usuario bigserial NOT NULL,
    token character varying NOT NULL,
    fecha_expiracion date NOT NULL,
    CONSTRAINT id_usertoken PRIMARY KEY (id_usuario, token)
);

CREATE TABLE IF NOT EXISTS public."Usuarios"
(
    id_usuario bigserial NOT NULL,
    correo character varying NOT NULL,
    contrasena character varying NOT NULL,
    tipo_usuario character varying NOT NULL,
    nombre character varying NOT NULL,
    ap_p character varying NOT NULL,
    ap_m character varying NOT NULL,
    PRIMARY KEY (id_usuario)
);

ALTER TABLE IF EXISTS public."Recuperaciones"
    ADD CONSTRAINT id_usuario FOREIGN KEY (id_usuario)
    REFERENCES public."Usuarios" (id_usuario) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION
    NOT VALID;

END;
